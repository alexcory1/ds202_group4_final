---
title: "readme"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}

library(data.table)
df <- fread('MD_COVID-19_-_MASTER_Case_Tracker.csv')
show(df)
```

## Including Plots
```{r}
library(tidyverse)
library(lubridate)
library(dplyr)
```

```{r}


df1 <- df %>% dplyr::mutate(year = year(as.Date(df$ReportDate,format="%m/%d/%Y")),
                 month = lubridate::month(as.Date(df$ReportDate,format="%m/%d/%Y")),
                 day = lubridate::day(as.Date(df$ReportDate,format="%m/%d/%Y")),
                 date = my(format(as.Date(df$ReportDate,format = "%m/%d/%Y"),"%m/%y")))
```


You can also embed plots, for example:
```{r}
ggplot(data=df1, aes(x=df1$date, y=df1$TotalCases, color= df1$CaseDelta)) +
  labs(x = "Month", y = "Total Cases", color = "New Cases") +
  scale_colour_gradientn(colors=rainbow(4)) +
  geom_line()+
  geom_point() +
  scale_x_date(date_labels = "%m-%y",
               date_breaks = "2 month") +
  ggtitle("Total Cases Over Time") +
  theme(axis.text.x = element_text(angle = 45, hjust=1))
```

```{r}
ggplot(data=df1, aes(x=df1$date, y=df1$PosTestPercent, color = df1$TestsDelta)) +
  geom_line() +
  labs(color = "New Tests", x = "Month", y = "Percentage of Positive Tests") +
  scale_colour_gradientn(colors=rainbow(4)) +
  geom_point() +
  scale_x_date(date_labels = "%m-%y",
               date_breaks = "2 month") +
  ggtitle("Percent Positive Over Time") + 
  theme(axis.text.x = element_text(angle = 45, hjust=1))
```

```{r}
ggplot(data=df1, aes(x=df1$total_hospitalized, y=df1$bedsTotal)) +
  xlab("Total Hospitalized") +
  ylab("Hospital Beds Available") +
  ggtitle("Hospital Beds vs Total Hospitalized") +
  geom_point()
```


```{r}
proportion_released = df1$total_released / df1$total_hospitalized
ggplot(data=df1, aes(x=df1$date, y=proportion_released, color=CaseDelta)) +
  scale_colour_gradientn(colors=rainbow(4)) +
  xlab("Month Reported") +
  ylab("Proportion Released") +
  geom_point() +
  scale_x_date(date_labels = "%m-%y",
               date_breaks = "2 month") +
  ggtitle("Proportion Released from Hospital by Month")
  theme(axis.text.x = element_text(angle = 45, hjust=1))

```

This graph shows the correlation between new cases and new deaths. Only 43% of the variability in new deaths can be explained by new cases.

```{r}
df1[is.na(df1)] = 0
ggplot(data=df1, aes(x=df1$deathsDelta, y=df1$CaseDelta)) +
  labs(y = "New Cases", x = "New Deaths") +
  geom_point() +
  ggtitle("New Deaths by New Cases")
  geom_abline(color = "red")
```
```{r}

ggp1 <- ggplot(data = df1, aes(x=df1$date)) +       
  geom_line(aes(y = df1$genMale), color = "lightblue", size=2) +
  geom_line(aes(y = df1$genFemale), color = "pink", size=2) +
  labs(x="Date", y="Cases") +
  ggtitle("Cases by Gender Over Time (Pink to Female, Blue to Male)") +
  theme(axis.text.x = element_text(angle = 45, hjust=1))

ggp1     

```
```{r}

ggp1 <- ggplot(data = df1, aes(x=df1$date)) +       
  geom_line(aes(y = df1$deathGenMale), color = "lightblue", size=2) +
  geom_line(aes(y = df1$deathGenFemale), color = "pink", size=2) +
  labs(x="Date", y="Deaths") +
  ggtitle("Deaths by Gender Over Time (Pink to Female, Blue to Male)") +
  theme(axis.text.x = element_text(angle = 45, hjust=1))

ggp1     

```
```{r}

ggp1 <- ggplot(data = df1, aes(x=df1$date)) +       
  geom_line(aes(y = df1$deathGenMale), color = "lightblue") +
  geom_line(aes(y = df1$deathGenFemale), color = "pink") +
  labs(x="Date", y="Deaths") +
  ggtitle("Deaths by Gender (Female corresponds to pink, male to blue)") +
  theme(axis.text.x = element_text(angle = 45, hjust=1))

ggp1     
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
